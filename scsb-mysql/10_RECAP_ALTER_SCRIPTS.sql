USE `recap` ;

-- Script for Release 0.9.28 starts here
UPDATE `recap`.`job_t` SET `JOB_NAME`='AccessionMatchingAndExportJobsInSequence', `JOB_DESC`='Runs all the accession process related jobs sequentially. Jobs that are included to run in sequential are, 1) Accession 2) Accession Report 3) Matching Algorithm 4) Incremental and Deleted Export' WHERE `JOB_ID`='7';

INSERT INTO `recap`.`job_param_t`(`RECORD_NUM`,`JOB_NAME`) VALUES (2, 'IncrementalRecordsExportPul');
INSERT INTO `recap`.`job_param_t`(`RECORD_NUM`,`JOB_NAME`) VALUES (3, 'IncrementalRecordsExportCul');
INSERT INTO `recap`.`job_param_t`(`RECORD_NUM`,`JOB_NAME`) VALUES (4, 'IncrementalRecordsExportNypl');
INSERT INTO `recap`.`job_param_t`(`RECORD_NUM`,`JOB_NAME`) VALUES (5, 'DeletedRecordsExportPul');
INSERT INTO `recap`.`job_param_t`(`RECORD_NUM`,`JOB_NAME`) VALUES (6, 'DeletedRecordsExportCul');
INSERT INTO `recap`.`job_param_t`(`RECORD_NUM`,`JOB_NAME`) VALUES (7, 'DeletedRecordsExportNypl');

INSERT INTO `recap`.`job_param_data_t`(`JOB_PARAM_DATA_ID`, `PARAM_NAME`, `PARAM_VALUE`, `RECORD_NUM`) VALUES (4, 'institutionCodes', 'CUL,NYPL', 2);
INSERT INTO `recap`.`job_param_data_t`(`JOB_PARAM_DATA_ID`, `PARAM_NAME`, `PARAM_VALUE`, `RECORD_NUM`) VALUES (5, 'requestingInstitutionCode', 'PUL', 2);
INSERT INTO `recap`.`job_param_data_t`(`JOB_PARAM_DATA_ID`, `PARAM_NAME`, `PARAM_VALUE`, `RECORD_NUM`) VALUES (6, 'fetchType', '1', 2);
INSERT INTO `recap`.`job_param_data_t`(`JOB_PARAM_DATA_ID`, `PARAM_NAME`, `PARAM_VALUE`, `RECORD_NUM`) VALUES (7, 'outputFormat', '0', 2);
INSERT INTO `recap`.`job_param_data_t`(`JOB_PARAM_DATA_ID`, `PARAM_NAME`, `PARAM_VALUE`, `RECORD_NUM`) VALUES (8, 'institutionCodes', 'PUL,NYPL', 3);
INSERT INTO `recap`.`job_param_data_t`(`JOB_PARAM_DATA_ID`, `PARAM_NAME`, `PARAM_VALUE`, `RECORD_NUM`) VALUES (9, 'requestingInstitutionCode', 'CUL', 3);
INSERT INTO `recap`.`job_param_data_t`(`JOB_PARAM_DATA_ID`, `PARAM_NAME`, `PARAM_VALUE`, `RECORD_NUM`) VALUES (10, 'fetchType', '1', 3);
INSERT INTO `recap`.`job_param_data_t`(`JOB_PARAM_DATA_ID`, `PARAM_NAME`, `PARAM_VALUE`, `RECORD_NUM`) VALUES (11, 'outputFormat', '0', 3);
INSERT INTO `recap`.`job_param_data_t`(`JOB_PARAM_DATA_ID`, `PARAM_NAME`, `PARAM_VALUE`, `RECORD_NUM`) VALUES (12, 'institutionCodes', 'PUL,CUL', 4);
INSERT INTO `recap`.`job_param_data_t`(`JOB_PARAM_DATA_ID`, `PARAM_NAME`, `PARAM_VALUE`, `RECORD_NUM`) VALUES (13, 'requestingInstitutionCode', 'NYPL', 4);
INSERT INTO `recap`.`job_param_data_t`(`JOB_PARAM_DATA_ID`, `PARAM_NAME`, `PARAM_VALUE`, `RECORD_NUM`) VALUES (14, 'fetchType', '1', 4);
INSERT INTO `recap`.`job_param_data_t`(`JOB_PARAM_DATA_ID`, `PARAM_NAME`, `PARAM_VALUE`, `RECORD_NUM`) VALUES (15, 'outputFormat', '1', 4);
INSERT INTO `recap`.`job_param_data_t`(`JOB_PARAM_DATA_ID`, `PARAM_NAME`, `PARAM_VALUE`, `RECORD_NUM`) VALUES (16, 'institutionCodes', 'CUL,NYPL', 5);
INSERT INTO `recap`.`job_param_data_t`(`JOB_PARAM_DATA_ID`, `PARAM_NAME`, `PARAM_VALUE`, `RECORD_NUM`) VALUES (17, 'requestingInstitutionCode', 'PUL', 5);
INSERT INTO `recap`.`job_param_data_t`(`JOB_PARAM_DATA_ID`, `PARAM_NAME`, `PARAM_VALUE`, `RECORD_NUM`) VALUES (18, 'fetchType', '2', 5);
INSERT INTO `recap`.`job_param_data_t`(`JOB_PARAM_DATA_ID`, `PARAM_NAME`, `PARAM_VALUE`, `RECORD_NUM`) VALUES (19, 'outputFormat', '2', 5);
INSERT INTO `recap`.`job_param_data_t`(`JOB_PARAM_DATA_ID`, `PARAM_NAME`, `PARAM_VALUE`, `RECORD_NUM`) VALUES (20, 'institutionCodes', 'PUL,NYPL', 6);
INSERT INTO `recap`.`job_param_data_t`(`JOB_PARAM_DATA_ID`, `PARAM_NAME`, `PARAM_VALUE`, `RECORD_NUM`) VALUES (21, 'requestingInstitutionCode', 'CUL', 6);
INSERT INTO `recap`.`job_param_data_t`(`JOB_PARAM_DATA_ID`, `PARAM_NAME`, `PARAM_VALUE`, `RECORD_NUM`) VALUES (22, 'fetchType', '2', 6);
INSERT INTO `recap`.`job_param_data_t`(`JOB_PARAM_DATA_ID`, `PARAM_NAME`, `PARAM_VALUE`, `RECORD_NUM`) VALUES (23, 'outputFormat', '2', 6);
INSERT INTO `recap`.`job_param_data_t`(`JOB_PARAM_DATA_ID`, `PARAM_NAME`, `PARAM_VALUE`, `RECORD_NUM`) VALUES (24, 'institutionCodes', 'PUL,CUL', 7);
INSERT INTO `recap`.`job_param_data_t`(`JOB_PARAM_DATA_ID`, `PARAM_NAME`, `PARAM_VALUE`, `RECORD_NUM`) VALUES (25, 'requestingInstitutionCode', 'NYPL', 7);
INSERT INTO `recap`.`job_param_data_t`(`JOB_PARAM_DATA_ID`, `PARAM_NAME`, `PARAM_VALUE`, `RECORD_NUM`) VALUES (26, 'fetchType', '2', 7);
INSERT INTO `recap`.`job_param_data_t`(`JOB_PARAM_DATA_ID`, `PARAM_NAME`, `PARAM_VALUE`, `RECORD_NUM`) VALUES (27, 'outputFormat', '2', 7);

ALTER TABLE MATCHING_BIB_T ADD STATUS VARCHAR(45);
UPDATE `recap`.`customer_code_t` SET `DELIVERY_RESTRICTIONS`='NB,NC,ND,NE,NF,NG,NH,NI,NJ,NK,NM,NN,NO,NP,NR,NS,NT,NV,NX,NY,NZ,GO,SA,SM,SP,SR,IL,OA,OC,ON,OW', `PWD_DELIVERY_RESTRICTIONS`='NB,NC,ND,NE,NF,NG,NH,NI,NJ,NK,NM,NN,NO,NP,NR,NS,NT,NV,NX,NY,NZ,GO,SA,SM,SP,SR,OA,OC,ON,OW' WHERE `CUSTOMER_CODE_ID`='66';
UPDATE `recap`.`customer_code_t` SET `DELIVERY_RESTRICTIONS`='NB,NC,NE,NK,NI,NX,IL,OA,OC,ON,OW', `PWD_DELIVERY_RESTRICTIONS`='NB,NC,NE,NK,NI,NX,OA,OC,ON,OW' WHERE `CUSTOMER_CODE_ID`='67';
UPDATE `recap`.`customer_code_t` SET `DELIVERY_RESTRICTIONS`='NB,NC,ND,NE,NF,NG,NH,NI,NJ,NK,NM,NN,NO,NP,NR,NS,NT,NV,NX,NY,NZ,GO,SA,SM,SP,SR,IL,OA,OC,ON,OW', `PWD_DELIVERY_RESTRICTIONS`='NB,NC,ND,NE,NF,NG,NH,NI,NJ,NK,NM,NN,NO,NP,NR,NS,NT,NV,NX,NY,NZ,GO,SA,SM,SP,SR,OA,OC,ON,OW' WHERE `CUSTOMER_CODE_ID`='73';
UPDATE `recap`.`customer_code_t` SET `DELIVERY_RESTRICTIONS`='NB,NC,ND,NE,NF,NG,NH,NI,NJ,NK,NM,NN,NO,NP,NR,NS,NT,NV,NX,NY,NZ,GO,SA,SM,SP,SR,IL,OA,OC,ON,OW', `PWD_DELIVERY_RESTRICTIONS`='NB,NC,ND,NE,NF,NG,NH,NI,NJ,NK,NM,NN,NO,NP,NR,NS,NT,NV,NX,NY,NZ,GO,SA,SM,SP,SR,OA,OC,ON,OW' WHERE `CUSTOMER_CODE_ID`='77';
UPDATE `recap`.`customer_code_t` SET `DELIVERY_RESTRICTIONS`='NB,NC,ND,NE,NF,NG,NH,NI,NJ,NK,NM,NN,NO,NP,NR,NS,NT,NV,NX,NY,NZ,GO,SA,SM,SP,SR,IL,OA,OC,ON,OW', `PWD_DELIVERY_RESTRICTIONS`='NB,NC,ND,NE,NF,NG,NH,NI,NJ,NK,NM,NN,NO,NP,NR,NS,NT,NV,NX,NY,NZ,GO,SA,SM,SP,SR,OA,OC,ON,OW' WHERE `CUSTOMER_CODE_ID`='82';
UPDATE `recap`.`customer_code_t` SET `DELIVERY_RESTRICTIONS`='NB,NC,ND,NE,NF,NG,NH,NI,NJ,NK,NM,NN,NO,NP,NR,NS,NT,NV,NX,NY,NZ,GO,SA,SM,SP,SR,IL,OA,OC,ON,OW', `PWD_DELIVERY_RESTRICTIONS`='NB,NC,ND,NE,NF,NG,NH,NI,NJ,NK,NM,NN,NO,NP,NR,NS,NT,NV,NX,NY,NZ,GO,SA,SM,SP,SR,OA,OC,ON,OW' WHERE `CUSTOMER_CODE_ID`='88';
UPDATE `recap`.`customer_code_t` SET `DELIVERY_RESTRICTIONS`='NB,NC,ND,NE,NF,NG,NH,NI,NJ,NK,NM,NN,NO,NP,NR,NS,NT,NV,NX,NY,NZ,GO,SA,SM,SP,SR,IL,OA,OC,ON,OW' WHERE `CUSTOMER_CODE_ID`='96';
UPDATE `recap`.`customer_code_t` SET `DELIVERY_RESTRICTIONS`='NB,NC,ND,NE,NF,NG,NH,NI,NJ,NK,NM,NN,NO,NP,NR,NS,NT,NV,NX,NY,NZ,GO,SA,SM,SP,SR,IL,OA,OC,ON,OW', `PWD_DELIVERY_RESTRICTIONS`='NB,NC,ND,NE,NF,NG,NH,NI,NJ,NK,NM,NN,NO,NP,NR,NS,NT,NV,NX,NY,NZ,GO,SA,SM,SP,SR,OA,OC,ON,OW' WHERE `CUSTOMER_CODE_ID`='98';
UPDATE `recap`.`customer_code_t` SET `DELIVERY_RESTRICTIONS`='NB,NC,ND,NE,NF,NG,NH,NI,NJ,NK,NM,NN,NO,NP,NR,NS,NT,NV,NX,NY,NZ,GO,SA,SM,SP,SR,IL,OA,OC,ON,OW', `PWD_DELIVERY_RESTRICTIONS`='NB,NC,ND,NE,NF,NG,NH,NI,NJ,NK,NM,NN,NO,NP,NR,NS,NT,NV,NX,NY,NZ,GO,SA,SM,SP,SR,OA,OC,ON,OW' WHERE `CUSTOMER_CODE_ID`='99';
UPDATE `recap`.`customer_code_t` SET `DELIVERY_RESTRICTIONS`='NB,NC,ND,NE,NF,NG,NH,NI,NJ,NK,NM,NN,NO,NP,NR,NS,NT,NV,NX,NY,NZ,GO,SA,SM,SP,SR,OA,OC,ON,OW', `PWD_DELIVERY_RESTRICTIONS`='NB,NC,ND,NE,NF,NG,NH,NI,NJ,NK,NM,NN,NO,NP,NR,NS,NT,NV,NX,NY,NZ,GO,SA,SM,SP,SR,OA,OC,ON,OW' WHERE `CUSTOMER_CODE_ID`='101';

INSERT INTO `recap`.`customer_code_t` (`CUSTOMER_CODE_ID`,`CUSTOMER_CODE`,`DESCRIPTION`,`OWNING_INST_ID`,`DELIVERY_RESTRICTIONS`,`PWD_DELIVERY_RESTRICTIONS`,`RECAP_DELIVERY_RESTRICTIONS`,`CIRC_DESK_LOCATION`) VALUES (106,'OA','SASB Allen Room',3,NULL,NULL,NULL,NULL);
INSERT INTO `recap`.`customer_code_t` (`CUSTOMER_CODE_ID`,`CUSTOMER_CODE`,`DESCRIPTION`,`OWNING_INST_ID`,`DELIVERY_RESTRICTIONS`,`PWD_DELIVERY_RESTRICTIONS`,`RECAP_DELIVERY_RESTRICTIONS`,`CIRC_DESK_LOCATION`) VALUES (107,'OC','SASB Cullman Center',3,NULL,NULL,NULL,NULL);
INSERT INTO `recap`.`customer_code_t` (`CUSTOMER_CODE_ID`,`CUSTOMER_CODE`,`DESCRIPTION`,`OWNING_INST_ID`,`DELIVERY_RESTRICTIONS`,`PWD_DELIVERY_RESTRICTIONS`,`RECAP_DELIVERY_RESTRICTIONS`,`CIRC_DESK_LOCATION`) VALUES (108,'ON','SASB Noma Scholar Room',3,NULL,NULL,NULL,NULL);
INSERT INTO `recap`.`customer_code_t` (`CUSTOMER_CODE_ID`,`CUSTOMER_CODE`,`DESCRIPTION`,`OWNING_INST_ID`,`DELIVERY_RESTRICTIONS`,`PWD_DELIVERY_RESTRICTIONS`,`RECAP_DELIVERY_RESTRICTIONS`,`CIRC_DESK_LOCATION`) VALUES (109,'OW','SASB Wertheim Study',3,NULL,NULL,NULL,NULL);

INSERT INTO `delivery_restriction_cross_partner_t` (`DELIVERY_RESTRICTION_CROSS_PARTNER_ID`,`DELIVERY_RESTRICTIONS`,`INSTITUTION_ID`) VALUES (6,'NB,NC,ND,NE,NF,NG,NH,NI,NJ,NK,NM,NN,NO,NP,NR,NS,NT,NV,NX,NY,NZ,GO,SA,SM,SP,SR,OA,OC,ON,OW',3);

UPDATE `recap`.`cross_partner_mapping_t` SET `DELIVERY_RESTRICTION_CROSS_PARTNER_ID`='6' WHERE `CUSTOMER_CODE_ID`='53' and`DELIVERY_RESTRICTION_CROSS_PARTNER_ID`='2';
UPDATE `recap`.`cross_partner_mapping_t` SET `DELIVERY_RESTRICTION_CROSS_PARTNER_ID`='6' WHERE `CUSTOMER_CODE_ID`='49' and`DELIVERY_RESTRICTION_CROSS_PARTNER_ID`='2';
UPDATE `recap`.`cross_partner_mapping_t` SET `DELIVERY_RESTRICTION_CROSS_PARTNER_ID`='6' WHERE `CUSTOMER_CODE_ID`='48' and`DELIVERY_RESTRICTION_CROSS_PARTNER_ID`='2';
UPDATE `recap`.`cross_partner_mapping_t` SET `DELIVERY_RESTRICTION_CROSS_PARTNER_ID`='6' WHERE `CUSTOMER_CODE_ID`='45' and`DELIVERY_RESTRICTION_CROSS_PARTNER_ID`='2';
UPDATE `recap`.`cross_partner_mapping_t` SET `DELIVERY_RESTRICTION_CROSS_PARTNER_ID`='6' WHERE `CUSTOMER_CODE_ID`='43' and`DELIVERY_RESTRICTION_CROSS_PARTNER_ID`='2';
UPDATE `recap`.`cross_partner_mapping_t` SET `DELIVERY_RESTRICTION_CROSS_PARTNER_ID`='6' WHERE `CUSTOMER_CODE_ID`='30' and`DELIVERY_RESTRICTION_CROSS_PARTNER_ID`='2';

UPDATE `recap`.`cross_partner_mapping_t` SET `DELIVERY_RESTRICTION_CROSS_PARTNER_ID`='6' WHERE `CUSTOMER_CODE_ID`='1' and`DELIVERY_RESTRICTION_CROSS_PARTNER_ID`='2';
UPDATE `recap`.`cross_partner_mapping_t` SET `DELIVERY_RESTRICTION_CROSS_PARTNER_ID`='6' WHERE `CUSTOMER_CODE_ID`='25' and`DELIVERY_RESTRICTION_CROSS_PARTNER_ID`='2';

INSERT INTO `recap`.`job_t` (`JOB_ID`,`JOB_NAME`,`JOB_DESC`,`LAST_EXECUTED_TIME`,`NEXT_RUN_TIME`,`CRON_EXP`,`STATUS`,`JOB_INSTANCE_ID`) VALUES (13,'SubmitCollection','Updates the bib, holding, item information for the given barcode in marc or scsb xml format',NULL,NULL,NULL,NULL,NULL);
INSERT INTO `recap`.`job_t` (`JOB_ID`,`JOB_NAME`,`JOB_DESC`,`LAST_EXECUTED_TIME`,`NEXT_RUN_TIME`,`CRON_EXP`,`STATUS`,`JOB_INSTANCE_ID`) VALUES (14,'IncrementalAndDeletedExportJobInSequence','Runs incremental and deleted records export jobs for each institution sequentially.',NULL,NULL,NULL,NULL,NULL);
INSERT INTO `recap`.`job_t` (`JOB_ID`,`JOB_NAME`,`JOB_DESC`,`LAST_EXECUTED_TIME`,`NEXT_RUN_TIME`,`CRON_EXP`,`STATUS`,`JOB_INSTANCE_ID`) VALUES (15,'IncrementalRecordsExportPul','Incremental Records Export for PUL',NULL,NULL,NULL,NULL,NULL);
INSERT INTO `recap`.`job_t` (`JOB_ID`,`JOB_NAME`,`JOB_DESC`,`LAST_EXECUTED_TIME`,`NEXT_RUN_TIME`,`CRON_EXP`,`STATUS`,`JOB_INSTANCE_ID`) VALUES (16,'IncrementalRecordsExportCul','Incremental Records Export for CUL',NULL,NULL,NULL,NULL,NULL);
INSERT INTO `recap`.`job_t` (`JOB_ID`,`JOB_NAME`,`JOB_DESC`,`LAST_EXECUTED_TIME`,`NEXT_RUN_TIME`,`CRON_EXP`,`STATUS`,`JOB_INSTANCE_ID`) VALUES (17,'IncrementalRecordsExportNypl','Incremental Records Export for NYPL',NULL,NULL,NULL,NULL,NULL);
INSERT INTO `recap`.`job_t` (`JOB_ID`,`JOB_NAME`,`JOB_DESC`,`LAST_EXECUTED_TIME`,`NEXT_RUN_TIME`,`CRON_EXP`,`STATUS`,`JOB_INSTANCE_ID`) VALUES (18,'DeletedRecordsExportPul','Deleted Records Export for PUL',NULL,NULL,NULL,NULL,NULL);
INSERT INTO `recap`.`job_t` (`JOB_ID`,`JOB_NAME`,`JOB_DESC`,`LAST_EXECUTED_TIME`,`NEXT_RUN_TIME`,`CRON_EXP`,`STATUS`,`JOB_INSTANCE_ID`) VALUES (19,'DeletedRecordsExportCul','Deleted Records Export for CUL',NULL,NULL,NULL,NULL,NULL);
INSERT INTO `recap`.`job_t` (`JOB_ID`,`JOB_NAME`,`JOB_DESC`,`LAST_EXECUTED_TIME`,`NEXT_RUN_TIME`,`CRON_EXP`,`STATUS`,`JOB_INSTANCE_ID`) VALUES (20,'DeletedRecordsExportNypl','Deleted Records Export for NYPL',NULL,NULL,NULL,NULL,NULL);

-- -----------------------------------------------------
-- Table `recap`.`ITEM_BARCODE_HISTORY_T`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ITEM_BARCODE_HISTORY_T` (
  `HISTORY_ID`   INT         NOT NULL AUTO_INCREMENT,
  `OWNING_INST` VARCHAR(45) NOT NULL,
  `OWNING_INST_ITEM_ID` VARCHAR(45) NOT NULL,
  `OLD_BARCODE` VARCHAR(45) NOT NULL,
  `NEW_BARCODE` VARCHAR(45) NOT NULL,
  `CREATED_DATE`       DATETIME    NOT NULL,
  PRIMARY KEY (`HISTORY_ID`)
)
  ENGINE = InnoDB;
-- Script for Release 0.9.28 ends here


